

@{
    ViewBag.Title = "CKYCEntry";
    Layout = "~/Views/Shared/_Layout.cshtml";

}

@section Styles
{
    <style>
        tr:nth-child(even) {
            background-color: lightsteelblue;
        }
    </style>
}
<!-- bootstrap datepicker -->
<link rel="stylesheet" href="~/AdminLTE/daterangepicker/daterangepicker.css">

<div id="divModalProgress" class="modal" style="display: none">
    <div class="center">
        <img alt="" src="~/img/loader.gif" />
    </div>
</div>

<div class="container-fluid row-no-gutters">
    <div class="row" align="center">
        <div class="col-lg-3 col-md-3 col-sm-3">
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6">
            <div class="panel-group" role="tablist" aria-multiselectable="true">
                <div class="panel panel-info">
                    <div id="divProfitLossHead" style="height: 28px;padding:6px; font-family:Verdana; font-size:12px; font-weight:800; text-align:center" class="panel-heading ProfitLosshead">
                        <strong>CKYC ENTRY</strong>
                    </div>
                    <div align="center" id="divProfitLossSelect" class="panel-body ProfitLoss">
                        <form class="form-horizontal" action="" method="post">
                            <div class="form-group">
                                @*<div align="right" class="col-md-2">
                                    </div>*@
                                <div align="right" class="col-md-2">

                                    <label for="cmbExchSeg" class="control-label" style="font-weight:normal;">UCC :&nbsp;</label>
                                </div>
                                <div align="left" class="col-md-6">
                                    <input type="text" class="form-control input-sm" id="txtUCCNm" placeholder="Search Client" list="ClientMasterSearch" required>
                                    <datalist id="ClientMasterSearch"></datalist>
                                </div>
                                <div align="left" class="col-md-2">
                                </div>
                            </div>

                            <div class="form-group row-no-gutters">
                                @*<div align="right" class="col-md-2">
                                    </div>*@
                                <div align="right" class="col-md-2">

                                </div>
                                <div align="left" class="col-md-3">

                                </div>
                                <div align="left" class="col-md-2">
                                </div>

                                <div align="left" class="col-md-3" id="CKYCCKYCalreadydone" hidden="hidden">
                                    <input id="chkckycdone" type="checkbox" /><label for="cmbExchSeg" class="control-label" style="font-weight: normal;">CKYC already done.</label>
                                </div>
                            </div>
                            <div class="form-group">
                                @*<div align="right" class="col-md-2">
                                    </div>*@
                                <div align="right" class="col-md-4" id="ckycrefno" hidden="hidden">
                                    <label class="control-label" style="font-weight: normal;">CKYC NO. :</label>  <input name="txtckycrefno" type="text" id="txtckycrefno" tabindex="4" required>
                                </div>
                                <div align="left" class="col-md-4" id="Remark" hidden="hidden">
                                    <label class="control-label" style="font-weight: normal;">Remark :</label>   <input name="txtckycremark" type="text" id="txtckycremark" tabindex="4" required>
                                </div>
                                <div align="right" class="col-md-2" id="CKYCSave" hidden="hidden">
                                    <input type="submit" name="btnSavedone" value="Save" class="btn btn-primary input-sm btnwidth" id="btnSavedone" />&nbsp;&nbsp;
                                </div>

                                <div align="left" class="col-md-2" id="CKYCCancel" hidden="hidden">
                                    <input type="submit" value="Cancel" name="btnCancel" class="btn btn-primary input-sm btnwidth" id="btnCancel" />
                                </div>
                            </div>


                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-3">
        </div>
    </div>

    <div class="row collapse" align="center" id="divReportPanel">
        <div class="col-lg-8 col-md-8 col-sm-8" style="margin-left: 245px;">
            <div class="panel panel-info">
                <div id="divReportPanelHeader" style="height: 28px;padding:6px; font-family:Verdana; font-size:12px; font-weight:800; text-align:center" class="panel-heading">
                    CKYC ENTRY
                </div>
                <div id="divReportPanelBody" class="panel-body">
                    <div class="panel-group">
                        @using (Html.BeginForm(null, null, null, FormMethod.Post, new { id = "frmCkycReport", role = "form", enctype = "multipart/form-data" }))
                        {

                            <div class="panel-body">
                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <div class="col-md-2" align="right">
                                        </div>
                                        <div class="col-md-2">
                                            <label class="divlabel">(Title)</label>
                                        </div>
                                        <div class="col-md-2" align="right">
                                            <label class="divlabel">(First Name) :</label>
                                        </div>
                                        <div class="col-md-2" align="right">
                                            <label class="divlabel">(Middle Name):</label>
                                        </div>

                                        <div class="col-md-2" align="right">
                                            <label class="divlabel">(Last Name):</label>
                                        </div>
                                        <div class="col-md-2" align="right">
                                        </div>
                                    </div>

                                    <div class="form-group" id="blnfather">

                                        <div class="col-md-2" align="right">
                                            <select name="cmbFatherOrSpouse" id="cmbFatherOrSpouseU" class="form-control input-sm">

                                                <option value='S'>Spouse</option>
                                                <option value='F'>Father</option>
                                                @*<option value='N'>None</option>*@

                                            </select>

                                        </div>




                                        <div class="col-md-2">
                                            <input name="txtfatherTitle" type="text" maxlength="5" id="txtfatherTitle" tabindex="4" style="width:90px;" >


                                        </div>
                                        <div class="col-md-2" align="right">

                                            <input name="txtFatherFNm" type="text" maxlength="50" id="txtFatherFNmU" tabindex="5" style="width:122px;">


                                        </div>
                                        <div class="col-md-2" align="right">

                                            <input name="txtFatherMNm" type="text" maxlength="50" id="txtFatherMNmU" tabindex="6" style="width:122px;">

                                        </div>

                                        <div class="col-md-2" align="right">

                                            <input name="txtFatherLNm" type="text" maxlength="50" id="txtFatherLNmU" tabindex="7" style="width:122px;">


                                        </div>
                                        <div class="col-md-2" align="right">

                                        </div>

                                    </div>
                                    <div class="form-group" id="blnmother">

                                        <div class="col-md-2" align="right">
                                            Mother Name :

                                        </div>




                                        <div class="col-md-2">
                                            <input name="txtMotherTitle" type="text" maxlength="5" id="txtMotherTitle" tabindex="8" style="width:90px;">

                                        </div>
                                        <div class="col-md-2" align="right">
                                            <input name="txtMotherFNm" type="text" maxlength="50" id="txtMotherFNm" tabindex="9" style="width:122px;">
                                        </div>
                                        <div class="col-md-2" align="right">
                                            <input name="txtMotherMNm" type="text" maxlength="50" id="txtMotherMNm" tabindex="10" style="width:122px;">
                                        </div>

                                        <div class="col-md-2" align="right">
                                            <input name="txtMotherLNm" type="text" maxlength="50" id="txtMotherLNm" tabindex="11" style="width:122px;">
                                        </div>
                                        <div class="col-md-2" align="right">

                                        </div>

                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-2" align="right">
                                            <label class="divlabel">Maiden Name (If any*) :</label>
                                        </div>
                                        <div class="col-md-2">
                                            <input name="txtMaidenTitle" type="text" maxlength="5" id="txtMaidenTitle" disabled="disabled" tabindex="12" style="background-color:LightGrey;width:90px;">
                                        </div>
                                        <div class="col-md-2" align="right">
                                            <input name="txtMaidenFNm" type="text" maxlength="50" id="txtMaidenFNm" disabled="disabled" tabindex="13" style="background-color:LightGrey;width:122px;">

                                        </div>
                                        <div class="col-md-2" align="right">

                                            <input name="txtMaidenMNm" type="text" maxlength="50" id="txtMaidenMNm" disabled="disabled" tabindex="14" style="background-color:LightGrey;width:122px;">
                                        </div>

                                        <div class="col-md-2" align="right">
                                            <input name="txtMaidenLNm" type="text" maxlength="50" id="txtMaidenLNm" disabled="disabled" tabindex="15" style="background-color:LightGrey;width:122px;">

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-2" align="right">

                                        </div>

                                        <div class="col-md-2" align="right">

                                            <label class="divlabel"> A/C Type :</label>
                                        </div>
                                        <div class="col-md-2" align="right">
                                            <select name="cmbACType" id="cmbACTypeU" tabindex="16" style="width:127px;">

                                                <option selected="selected" value="01">Normal</option>



                                            </select>


                                        </div>
                                        <div class="col-md-6" align="right">

                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-md-2" align="right">

                                        </div>
                                        <div class="col-md-2">
                                            <label class="divlabel">Citizenship :</label>
                                        </div>
                                        <div class="col-md-2" align="right">
                                            <div class="col-md-2">

                                                <select name="cmbCitizenship" id="cmbCitizenshipU" tabindex="17" class="clsText" style="width:127px;">

                                                    <option selected="selected" value="I">Indian</option>


                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-2" align="right">
                                            <label class="divlabel">Residential Status :</label>
                                        </div>
                                        <div class="col-md-2" align="right">
                                            <select name="cmbResStatus" id="cmbResStatusU" tabindex="18" class="clsText" style="width:122px;">

                                                <option selected="selected" value="01">Resident Individual</option>


                                            </select>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-2" align="right">

                                        </div>

                                        <div class="col-md-2" align="right">
                                            <label class="divlabel">City/Place of Birth :</label>
                                        </div>
                                        <div class="col-md-2" align="right">


                                            <input name="txtBirthPlace" type="text" maxlength="50" id="txtBirthPlaceU" tabindex="19" value='' class="MadtryText" style="width:122px;">


                                        </div>
                                        <div class="col-md-2" align="right">
                                            <label class="divlabel">Country of Birth :</label>
                                        </div>
                                        <div class="col-md-2" align="right">

                                            <input name="txtBirthCountry" type="text" maxlength="50" id="txtBirthCountryU" value='' tabindex="20" class="MadtryText" style="width:122px;">


                                        </div>
                                        <div class="col-md-2" align="right">

                                        </div>

                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-3" align="right">
                                            <label class="divlabel">Proof of Identity :</label>
                                        </div>

                                        <div class="col-md-3" align="right">
                                            <select name="cmbIdentityProof" id="cmbIdentityProofU" tabindex="21" class="clsText" style="width:200px;">

                                                <option value="Select">Select</option>
                                                <option value="A">Passport</option>
                                                <option value="B">Voter ID</option>
                                                @*<option value="C">PAN</option>*@
                                                <option value="D">Driving Licence</option>
                                                <option value="E">UID</option>
                                                <option value="S01">ID Card by Central/State Gov,Pub Sec undertaking,Bank,FII</option>
                                                <option value="Z">Others</option>
                                            </select>

                                            <div id="DIV1Date">
                                                <label class="divlabel">Expiry Date :</label>
                                                <input type="text" class="form-control input-sm" id="txtIdentityProofExpDtU" value=''>
                                                <label class="input-group-addon btn" for="date">
                                                    <span class="fa fa-calendar  open-datetimepicker"></span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="col-md-1" align="right">
                                            <label class="divlabel">ID :</label>
                                        </div>
                                        <div class="col-md-2" align="right">
                                            <input name="txtIdentityProofID" type="text" maxlength="25" id="txtIdentityProofIDU" tabindex="22" class="clsText" style="width:100px;">
                                        </div>
                                        <div class="col-md-3" align="right">
                                            <input type="file" name="FIdentityProof" id="FIdentityProof" tabindex="23" style="width:145px;">

                                            <img id="IMG0" alt="" width="40" height="40" />

                                            <span id="lbl2" tabindex="25">
                                            </span>
                                        </div>



                                    </div>


                                    <div class="form-group">
                                        <div class="col-md-3" align="right">
                                            <label class="divlabel"> Permanant Address Proof :</label>
                                        </div>

                                        <div class="col-md-3" align="right">
                                            <select name="cmbPermanantAddProof" id="cmbPermanantAddProofU" tabindex="27" class="clsText" style="width:200px;">

                                                <option value="Select">Select</option>
                                                <option value="01">UID (Aadhar Card)</option>
                                                <option value="02">Passport</option>
                                                <option value="03">Driving License</option>
                                                <option value="04">Voters Identity Card</option>
                                                <option value="99">Other</option>
                                            </select>
                                            <div id="DIV2Date">
                                                <label class="divlabel">Expiry Date :</label>
                                                <input type="text" class="form-control input-sm" id="txtPermAddrProofExpDtU" value=''>
                                                <label class="input-group-addon btn" for="date">
                                                    <span class="fa fa-calendar  open-datetimepicker1"></span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="col-md-1" align="right">
                                            <label class="divlabel">ID :</label>
                                        </div>
                                        <div class="col-md-2" align="right">
                                            <input name="txtPermAddrProofID" type="text" maxlength="25" id="txtPermAddrProofIDU" tabindex="28" class="clsText" style="width:100px;">
                                        </div>
                                        <div class="col-md-3" align="right">
                                            <input type="file" name="FPermAddrProof" id="FPermAddrProof" tabindex="29" style="width:145px;">
                                            <img id="IMG1" alt="" width="40" height="40" />
                                            <span id="lbl3"></span>
                                        </div>


                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-3" align="right">
                                            <label class="divlabel"> Correspondence Address Proof :</label>
                                        </div>

                                        <div class="col-md-3" align="right">
                                            <select name="cmbCorrosAddProof" id="cmbCorrosAddProofU" tabindex="32" class="clsText" style="width:200px;">

                                                <option selected="selected" value="Select">Select</option>
                                                <option value="01">UID (Aadhar Card)</option>
                                                <option value="02">Passport</option>
                                                <option value="03">Driving License</option>
                                                <option value="04">Voters Identity Card</option>
                                                <option value="99">Other</option>
                                            </select>
                                            <div id="DIV3Date">
                                                <label class="divlabel">Expiry Date :</label>
                                                <input type="text" class="form-control input-sm" id="txtAddrProofExpDtU" value=''>
                                                <label class="input-group-addon btn" for="date">
                                                    <span class="fa fa-calendar  open-datetimepicker2"></span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="col-md-1" align="right">
                                            <label class="divlabel">ID :</label>
                                        </div>
                                        <div class="col-md-2" align="right">
                                            <input name="txtAddrProofID" type="text" maxlength="25" id="txtAddrProofIDU" tabindex="33" class="clsText" style="width:100px;">
                                        </div>
                                        <div class="col-md-3" align="right">
                                        </div>



                                    </div>
                                </div>


                                <div class="form-group">
                                    <div class="col-md-2" align="right">

                                    </div>

                                    <div class="col-md-4" align="right">

                                    </div>

                                    <div class="col-md-2" align="right">
                                        <label class="divlabel"> Photo :</label>
                                    </div>
                                    <div class="col-md-3" align="right">
                                        <input type="file" name="FPhoto" id="FPhoto" tabindex="35" style="width:145px;">
                                        <img id="IMG2" alt="" width="40" height="40" />
                                        <span id="lbl0"></span>

                                    </div>


                                </div>
                                <div class="form-group">
                                    <div class="col-md-2" align="right">

                                    </div>

                                    <div class="col-md-4" align="right">

                                    </div>

                                    <div class="col-md-2" align="right">
                                        <label class="divlabel"> Signature :</label>
                                    </div>
                                    <div class="col-md-3" align="right">
                                        <input type="file" name="FSignature" id="FSignature" tabindex="37" style="width:145px;">


                                        <img id="IMG3" alt="" width="40" height="40" />
                                        <span id="lbl1"></span>

                                    </div>


                                </div>

                                <div class="form-group">
                                    <div class="col-md-2" align="right">

                                    </div>

                                    <div class="col-md-4" align="right">

                                    </div>
                                    <div class="col-md-2" align="right">

                                    </div>
                                    <div class="col-md-1" align="right">

                                    </div>
                                    <div class="col-md-1" align="right">
                                        <input name="HldStrNo" type="text" id="HldStrNo" style="visibility:hidden;" />                                       
                                    </div>
                                    <div class="col-md-1" align="right">
                                        <input type="submit" name="btnSave" value="Save" class="btn btn-primary input-sm btnwidth" id="btnSave" />
                                    </div>
                                    <div class="col-md-1" align="left">
                                        <input type="submit" value="Cancel" name="btnCancel" class="btn btn-primary input-sm btnwidth" id="btnCancel" />

                                    </div>


                                </div>

                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


@section Scripts
{
    <script src="~/AdminLTE/moment/min/moment.min.js"></script>
    <script src="~/AdminLTE/daterangepicker/daterangepicker.js"></script>


    <script type="text/javascript">
        $(document).ready(function () {
            $('#DIV3Date').css('display', 'none');
            $('#DIV2Date').css('display', 'none');
            $('#DIV1Date').css('display', 'none');

            $('#FIdentityProof').bind('change', function () {
                var a = (this.files[0].size);
                if (a > 250000) {
                    alert('Size of images/files can not be greater than 250 kb.');
                    document.getElementById('FIdentityProof').value = '';
                    return false;
                };
            });
            $('#FPermAddrProof').bind('change', function () {
                var a = (this.files[0].size);
                if (a > 250000) {
                    alert('Size of images/files can not be greater than 250 kb.');
                    document.getElementById('FPermAddrProof').value = '';
                    return false;
                };
            });
            $('#FPhoto').bind('change', function () {
                var a = (this.files[0].size);
                if (a > 250000) {
                    alert('Size of images/files can not be greater than 250 kb.');
                    document.getElementById('FPhoto').value = '';
                    return false;
                };
            });
            $('#FSignature').bind('change', function () {
                var a = (this.files[0].size);
                if (a > 250000) {
                    alert('Size of images can not be greater than 50 kb.');
                    document.getElementById('FSignature').value = '';
                    return false;
                };
            });
        });

        $('#chkckycdone').on('change', function () {
            // From the other examples
            if (!this.checked) {
                $("#ckycrefno").hide();
                $("#Remark").hide();
                $("#divReportPanel").show();

                $("#CKYCSave").hide();
                $("#CKYCCancel").hide();
            }
            else {
                $("#ckycrefno").show();
                $("#Remark").show();
                $("#divReportPanel").hide();
                $("#CKYCSave").show();
                $("#CKYCCancel").show();


            }
        });


        $(".ProfitLosshead").click(function () {
            $('.ProfitLoss').toggle();
        });

        $('#txtUCCNm').on("input", function () {

            if ($('#txtUCCNm').val() == "") {
                return;
            }
            var options = {};
            options.url = '@Url.Action("GetClientPanDetails", "Tplus")';
            options.type = "GET";
            options.data = { 'criteria': $('#txtUCCNm').val() };
            options.dataType = "json";
            options.success = function (data) {


                $("#ClientMasterSearch").empty();
                for (var i = 0; i < data.length; i++) {
                    $('#ClientMasterSearch').append("<option value='" +
                    data[i].ClientName + "'></option>");
                }



            };
            $.ajax(options);
        });




        $('#txtUCCNm').change(function () {
            event.preventDefault();
            //if ($('#txtUCCNm').val() == "") {
            //    alert("Enter Valid Client");
            //    return false;
            //}




            var PANNo = "";
            var valNew = $('#txtUCCNm').val();
            if (valNew.trim() != "") {
                valNew = $('#txtUCCNm').val().split("~");
                PANNo = valNew[1]
            }

            if (PANNo == "") {
                alert("Please Enter Panno.");
                return false;
            }
            //if (PANNo.toString().trim().length!=10) {

            //alert("PAN No Recorded For This Client Is : [PANNo]  Which Is Invalid So Cannot Edit This Record");
            //return false;
            //}


            $.ajax({
                type: "GET",
                url: '@Url.Action("GetCKYCEntry", "Tplus")',
                ype: "GET",
                contentType: "application/json; charset=utf-8",
                datatype: "json",
                data: { 'PANNo': PANNo, 'valNew': valNew },
                beforeSend: function () {
                    //$("#btnFetch").attr("disabled", true);
                    $('#divModalProgress').modal('show');
                    $('#divSaveReport').hide();
                },
                success: function (ulist) {
                    var n = ulist.includes("Multiple UCC exist");
                    // $('#divReportPanelHeader').html(display);
                    //$('#divReportPanelBody').html(response);
                    if (ulist == "Yes") {
                        alert("Invalid PAN");
                    }
                    else if (ulist == "Yes1") {
                        alert("CKYC Entry Is Available Only For Individual Clients");
                    }
                    else if (n == true) {

                        alert(ulist);
                    }
                    else if (ulist == "New Entry") {

                        $('#divReportPanelBody').show();
                        $('#divReportPanel').show();
                        $("#btnFetch").attr("disabled", false);
                        alert(ulist);
                    }
                    else {
                        $("#CKYCCKYCalreadydone").show();
                        if (ulist.length != 0) {
                            $.each(ulist, function (i, obj) {
                                $("#cmbFatherOrSpouseU").val(obj.CK_fatherspouseflag).trigger("chosen:updated");

                                $('#txtfatherTitle').val(obj.CK_FatherPrefix);
                                $('#txtFatherFNmU').val(obj.CK_FatherFname);
                                $('#txtFatherMNmU').val(obj.CK_FatherMname);
                                $('#txtFatherLNmU').val(obj.CK_FatherLname);

                                $('#txtMotherTitle').val(obj.CK_MotherPrefix);
                                $('#txtMotherFNm').val(obj.CK_Motherfname);
                                $('#txtMotherMNm').val(obj.CK_MotherMname);
                                $('#txtMotherLNm').val(obj.CK_MotherLname);

                                $("#cmbACTypeU").val(obj.CK_ActType).trigger("chosen:updated");

                                $("#cmbCitizenshipU").val(obj.CK_citizenship).trigger("chosen:updated");
                                $("#cmbResStatusU").val(obj.CK_Resistatus).trigger("chosen:updated");

                                $('#txtBirthPlaceU').val(obj.CK_CityOfBirth);
                                $('#txtBirthCountryU').val(obj.CK_CountyOfBirth);




                                $("#cmbIdentityProofU").val(obj.CK_IdentityProof).trigger("chosen:updated");
                                $('#txtIdentityProofIDU').val(obj.CK_IdentityProofID);

                                if (obj.CK_IdentityProofExpDt != "") {
                                    var year = obj.CK_IdentityProofExpDt.substr(0, 4);
                                    var month = obj.CK_IdentityProofExpDt.substr(4, 2);
                                    var date = obj.CK_IdentityProofExpDt.substr(6, 2);

                                    $('#txtIdentityProofExpDtU').val(date + '/' + month + '/' + year);

                                    $("#DIV1Date").show();
                                }

                                $("#cmbPermanantAddProofU").val(obj.CK_PermAddrProof).trigger("chosen:updated");
                                $('#txtPermAddrProofIDU').val(obj.CK_PermAddrProofID);

                                if (obj.CK_PermAddrProofExpDt != "") {
                                    var year = obj.CK_PermAddrProofExpDt.substr(0, 4);
                                    var month = obj.CK_PermAddrProofExpDt.substr(4, 2);
                                    var date = obj.CK_PermAddrProofExpDt.substr(6, 2);

                                    $('#txtPermAddrProofExpDtU').val(date + '/' + month + '/' + year);
                                    $("#DIV2Date").show();
                                }

                                $("#cmbCorrosAddProofU").val(obj.CK_AddrProof).trigger("chosen:updated");
                                $('#txtAddrProofIDU').val(obj.CK_AddrProofID);

                                if (obj.CK_AddrProofExpDt != "") {

                                    var year = obj.CK_AddrProofExpDt.substr(0, 4);
                                    var month = obj.CK_AddrProofExpDt.substr(4, 2);
                                    var date = obj.CK_AddrProofExpDt.substr(6, 2);
                                    $('#txtAddrProofExpDtU').val(date + '/' + month + '/' + year);

                                    $("#DIV3Date").show();
                                }
                                $('#HldStrNo').val(obj.CK_SRNO);



                                $("#IMG0").attr("src", obj.Image0);
                                $("#IMG1").attr("src", obj.Image1);
                                $("#IMG2").attr("src", obj.Image2);
                                $("#IMG3").attr("src", obj.Image3);

                                $("#btnSave").attr('value', 'Update');
                                $("#btnCKYCSave").attr('value', 'Update');


                                return false;
                            });
                        }
                        else {
                            $("#btnSave").attr('value', 'Save');
                            $("#btnCKYCSave").attr('value', 'Save');

                            $('#frmCkycReport input[type="text"]').val('');
                            $('select').each(function () {

                                $("select").prop('selectedIndex', 0);

                                $("#IMG0").attr("src", "");
                                $("#IMG1").attr("src", "");
                                $("#IMG2").attr("src", "");
                                $("#IMG3").attr("src", "");
                            });
                        }

                        $('#divReportPanelBody').show();
                        $('#divReportPanel').show();
                        $("#btnFetch").attr("disabled", false);
                    }


                },
                complete: function () {
                    $('#divModalProgress').modal('hide');
                    $('#divSaveReport').show();
                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            });

        });




    </script>

    <script type="text/javascript">
        $("#btnSavedone").click(function () {

            var PANNo = "";
            var valNew = $('#txtUCCNm').val();
            if (valNew.trim() != "") {
                valNew = $('#txtUCCNm').val().split("~");
                PANNo = valNew[1]
            }
            //if ($("#txtckycrefno").val() == "")
            //{ alert("Enter the CKYC NO"); $("#txtckycrefno").focus(); return false; }
            if ($("#txtckycremark").val() == "")
            { alert("Enter the remark"); $("#txtckycremark").focus(); return false; }


            var formData = new FormData();
            formData.append("chkckycdone", chkckycdone);
            formData.append("txtckycrefno", $("#txtckycrefno").val());
            formData.append("txtckycremark", $("#txtckycremark").val());

            $.ajax({
                url: '@Url.Action("CKYCEntryNew", "Tplus")',
                type: "POST",
                processData: false,
                contentType: false,
                data: formData,
                beforeSend: function () {
                    $('#divModalProgress').modal('show');
                },
                success: function (response) {

                    alert(response);

                },
                complete: function () {
                    $('#divModalProgress').modal('hide');
                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            });




        });

        $("#btnSave").click(function () {

            var PANNo = "";
            var valNew = $('#txtUCCNm').val();
            if (valNew.trim() != "") {
                valNew = $('#txtUCCNm').val().split("~");
                PANNo = valNew[1]
            }

            var StrMsg = "";
            var blnFatherSpouse = true;
            var blnMother = true;

            if ($("#txtfatherTitle").val() == "" || $("#txtFatherFNmU").val() == "" || $("#txtFatherLNmU").val() == "") {
                if ($("#txtfatherTitle").val() == "") {

                    StrMsg = "Enter the Father Title";
                }
                if ($("#txtFatherFNmU").val() == "") {
                    if (StrMsg != "") {
                        StrMsg = StrMsg + ', ';
                    }
                    StrMsg = StrMsg + "First Name";
                    blnFatherSpouse = false;
                }

                if ($("#txtFatherLNmU").val() == "") {
                    if (StrMsg != "") {
                        StrMsg = StrMsg + ', ';
                    }
                    StrMsg = StrMsg + "Last Name";
                    blnFatherSpouse = false;
                }

            }
            if ($("#txtMotherTitle").val() == "" || $("#txtMotherFNm").val() == "" || $("#txtMotherLNm").val() == "") {
                if ($("#txtMotherTitle").val() == "") {

                    StrMsg = "Enter the Mother Title";
                }
                if ($("#txtMotherFNm").val() == "") {
                    if (StrMsg != "") {
                        StrMsg = StrMsg + ', ';
                    }
                    StrMsg = StrMsg + "Mother First Name";
                    blnMother = false;
                }

                if ($("#txtMotherLNm").val() == "") {
                    if (StrMsg != "") {
                        StrMsg = StrMsg + ', ';
                    }
                    StrMsg = StrMsg + "Mother Last Name";
                    blnMother = false;
                }

            }

            if (blnFatherSpouse == false && blnMother == false) {
                alert(StrMsg); return false;
            }

       

            ////if ($("#txtfatherTitle").val() == "")
            ////{ alert("Enter the Father Title"); $("#txtfatherTitle").focus(); return false; }

            ////if ($("#txtFatherFNmU").val() == "")
            ////{ alert("Enter the Father First Name"); $("#txtFatherFNmU").focus(); return false; }

            ////if ($("#txtFatherLNmU").val() == "")
            ////{ alert("Enter the Father Last Name"); $("#txtFatherLNmU").focus(); return false; }

            ////if ($("#txtMotherTitle").val() == "")
            ////{ alert("Enter the Mother Title"); $("#txtMotherTitle").focus(); return false; }

            ////if ($("#txtMotherFNm").val() == "")
            ////{ alert("Enter the Mother First Name"); $("#txtMotherFNm").focus(); return false; }

            ////if ($("#txtMotherLNm").val() == "")
            ////{ alert("Enter the Mother Last Name"); $("#txtMotherLNm").focus(); return false; }

            //if (($("#txtfatherTitle").val() != "") && ($("#txtFatherFNmU").val() != "") && ($("#txtFatherLNmU").val() != "")) {

                
            //}
            //else
            //{
            //    //if (($("#txtMotherTitle").val() != "") && ($("#txtMotherFNm").val() != "") && ($("#txtMotherLNm").val() != "")) {


            //    //    alert("Cannot be left blank!"); return false;
            //    //}

            //    alert("txtMotherTitle Cannot be left blank!"); return false;

            //}


            if ($("#cmbCitizenshipU").val() == "")
            { alert("Enter Citizenship"); $("#cmbCitizenshipU").focus(); return false; }

            if ($("#txtBirthPlaceU").val() == "")
            { alert("Enter Birth Place"); $("#txtBirthPlaceU").focus(); return false; }


            if ($("#txtBirthCountryU").val() == "")
            { alert("Enter Birth Country"); $("#txtBirthCountryU").focus(); return false; }


            if ($("#cmbIdentityProofU").val() == "")
            { alert("Enter Identity Proof"); $("#cmbIdentityProofU").focus(); return false; }

            if ($("#cmbPermanantAddProofU").val() == "")
            { alert("Enter Permanant Address Proof"); $("#cmbPermanantAddProofU").focus(); return false; }

            if ($("#cmbCorrosAddProofU").val() == "")
            { alert("Enter Corros Address Proof"); $("#cmbCorrosAddProofU").focus(); return false; }

            if ($("#FIdentityProof").val() == "")
            { alert("Upload File Identity Proof"); $("#FIdentityProof").focus(); return false; }


            if ($("#FPermAddrProof").val() == "")
            { alert("Upload File Permanent Address Proof"); $("#FPermAddrProof").focus(); return false; }

            if ($("#FPhoto").val() == "")
            { alert("Upload Photo"); $("#FPhoto").focus(); return false; }

            if ($("#FSignature").val() == "")
            { alert("Upload Signature"); $("#FSignature").focus(); return false; }


            var formData = new FormData();
            formData.append("cmbFatherOrSpouseU", $("#cmbFatherOrSpouseU").val());

            formData.append("txtfatherTitle", $("#txtfatherTitle").val());
            formData.append("txtFatherFNmU", $("#txtFatherFNmU").val());
            formData.append("txtFatherMNmU", $("#txtFatherMNmU").val());
            formData.append("txtFatherLNmU", $("#txtFatherLNmU").val());

            formData.append("txtMotherTitle", $("#txtMotherTitle").val());
            formData.append("txtMotherFNm", $("#txtMotherFNm").val());
            formData.append("txtMotherMNm", $("#txtMotherMNm").val());
            formData.append("txtMotherLNm", $("#txtMotherLNm").val());

            formData.append("txtMotherTitle", $("#txtMaidenTitle").val());
            formData.append("txtMotherFNm", $("#txtMaidenFNm").val());
            formData.append("txtMotherMNm", $("#txtMaidenMNm").val());
            formData.append("txtMotherLNm", $("#txtMaidenLNm").val());

            formData.append("cmbACTypeU", $("#cmbACTypeU").val());
            formData.append("cmbCitizenshipU", $("#cmbCitizenshipU").val());
            formData.append("cmbResStatusU", $("#cmbResStatusU").val());
            formData.append("txtBirthPlaceU", $("#txtBirthPlaceU").val());
            formData.append("txtBirthCountryU", $("#txtBirthCountryU").val());

            formData.append("cmbIdentityProofU", $("#cmbIdentityProofU").val());
            formData.append("txtIdentityProofIDU", $("#txtIdentityProofIDU").val());
            formData.append("txtIdentityProofExpDtU", $("#txtIdentityProofExpDtU").val());

            formData.append("cmbPermanantAddProofU", $("#cmbPermanantAddProofU").val());
            formData.append("txtPermAddrProofIDU", $("#txtPermAddrProofIDU").val());
            formData.append("txtPermAddrProofExpDtU", $("#txtPermAddrProofExpDtU").val());

            formData.append("cmbCorrosAddProofU", $("#cmbCorrosAddProofU").val());
            formData.append("txtAddrProofIDU", $("#txtAddrProofIDU").val());
            formData.append("txtAddrProofExpDtU", $("#txtAddrProofExpDtU").val());


            formData.append("HldStrNo", $("#HldStrNo").val());


            formData.append("txtUCCNm", PANNo);

            var chkckycdone = "0";
            if (document.getElementById('chkckycdone').checked == true) {
                chkckycdone = "1";
            }



            var FIdentityProof = $("#FIdentityProof").get(0).files;
            if (FIdentityProof.length > 0) {
                formData.append("FIdentityProof", FIdentityProof[0]);
            }

            var FPermAddrProof = $("#FPermAddrProof").get(0).files;
            if (FPermAddrProof.length > 0) {
                formData.append("FPermAddrProof", FPermAddrProof[0]);
            }

            var FPhoto = $("#FPhoto").get(0).files;
            if (FPhoto.length > 0) {
                formData.append("FPhoto", FPhoto[0]);
            }

            var FSignature = $("#FSignature").get(0).files;
            if (FSignature.length > 0) {
                formData.append("FSignature", FSignature[0]);
            }

            formData.append("btnvalue", $(this).val());



            $.ajax({
                url: '@Url.Action("CKYCEntryNew", "Tplus")',
                type: "POST",
                processData: false,
                contentType: false,
                data: formData,
                beforeSend: function () {
                    $('#divModalProgress').modal('show');
                },
                success: function (response) {

                    alert(response);

                },
                complete: function () {
                    $('#divModalProgress').modal('hide');
                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            });

        });

    </script>
    <script>



        $('#txtIdentityProofExpDtU').datepicker({
            format: 'dd/mm/yyyy',
            autoclose: true,
            endDate: ""

        });
        //$('#txtIdentityProofExpDtU').val(GetFormattedDate);
        //$('#txtIdentityProofExpDtU').datepicker('update');



        $('.open-datetimepicker').click(function (event) {
            event.preventDefault();
            $('#txtIdentityProofExpDtU').focus();
        });


        function GetFormattedDate() {
            var d = new Date();
            var day = ("0" + d.getDate()).slice(-2);
            var month = ("0" + (d.getMonth() + 1)).slice(-2);
            var year = d.getFullYear();
            return day + "/" + month + "/" + year;
        }

    </script>

    <script>


        $('#txtAddrProofExpDtU').datepicker({
            format: 'dd/mm/yyyy',
            autoclose: true,
            endDate: ""

        });
        //$('#txtAddrProofExpDtU').val(GetFormattedDate);
        //$('#txtAddrProofExpDtU').datepicker('update');



        $('.open-datetimepicker1').click(function (event) {
            event.preventDefault();
            $('#txtPermAddrProofExpDtU').focus();
        });


        function GetFormattedDate() {
            var d = new Date();
            var day = ("0" + d.getDate()).slice(-2);
            var month = ("0" + (d.getMonth() + 1)).slice(-2);
            var year = d.getFullYear();
            return day + "/" + month + "/" + year;
        }

    </script>


    <script>


        $('#txtPermAddrProofExpDtU').datepicker({
            format: 'dd/mm/yyyy',
            autoclose: true,
            endDate: ""

        });
        //$('#txtPermAddrProofExpDtU').val(GetFormattedDate);
        //$('#txtPermAddrProofExpDtU').datepicker('update');



        $('.open-datetimepicker2').click(function (event) {
            event.preventDefault();
            $('#txtAddrProofExpDtU').focus();
        });


        function GetFormattedDate() {
            var d = new Date();
            var day = ("0" + d.getDate()).slice(-2);
            var month = ("0" + (d.getMonth() + 1)).slice(-2);
            var year = d.getFullYear();
            return day + "/" + month + "/" + year;
        }

    </script>

    <script>
        $("#cmbIdentityProofU").change(function () {

            var category = $('select[name=cmbIdentityProof]').val(); // Here we can get the value of selected item

            if (category == "A" || category == "D") {
                $("#DIV1Date").show();
            }
            else {
                $("#DIV1Date").hide();
                $("#txtIdentityProofExpDtU").val('');

            }

        });
        $("#cmbPermanantAddProofU").change(function () {
            var category1 = $('select[name=cmbPermanantAddProof]').val(); // Here we can get the value of selected item
            if (category1 == "03" || category1 == "02") {
                $("#DIV2Date").show();
            }
            else {
                $("#DIV2Date").hide();
                $("#txtPermAddrProofExpDtU").val('');
            }
        });

        $("#cmbCorrosAddProofU").change(function () {
            var category2 = $('select[name=cmbCorrosAddProof]').val(); // Here we can get the value of selected item
            if (category2 == "03" || category2 == "02") {

                $("#DIV3Date").show();
            }
            else {
                $("#DIV3Date").hide();
                $("#txtAddrProofExpDtU").val('');
            }
        });





    </script>

    <script>
        function readURL1(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {

                    $('#IMG0').attr('src', e.target.result);


                }

                reader.readAsDataURL(input.files[0]);
            }
        }
        function readURL2(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#IMG1').attr('src', e.target.result);


                }

                reader.readAsDataURL(input.files[0]);
            }
        }
        function readURL3(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#IMG2').attr('src', e.target.result);


                }

                reader.readAsDataURL(input.files[0]);
            }
        }
        function readURL4(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#IMG3').attr('src', e.target.result);


                }

                reader.readAsDataURL(input.files[0]);
            }
        }

        $("#FIdentityProof").change(function () {
            readURL1(this);
        });
        $("#FPermAddrProof").change(function () {
            readURL2(this);
        });
        $("#FPhoto").change(function () {
            readURL3(this);
        });
        $("#FSignature").change(function () {
            readURL4(this);
        });

    </script>



}
